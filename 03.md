NIP-03
======

OpenTimestamps 事件的证明
-------------------------

`草案` `可选` `作者:fiatjaf` `作者:constant`

此 NIP 定义了一个 `kind:1040` 的事件，该事件可以包含对任何其他事件的 [OpenTimestamps](https://opentimestamps.org/) 证明：

```json
{
  "kind": 1040
  "tags": [
    ["e", <event-id>, <relay-url>],
    ["block", <block-height-as-string>, <block-hash>],
    ["alt", "opentimestamps attestation"]
  ],
  "content": <base64-encoded OTS file data>
}
```

- OpenTimestamps 证明**必须**证明其摘要为引用的 `e` 事件 id。
- `block` 标签是可选的，它存在是为了建立给定事件存在的最小日期。
- `content` **必须**是包含至少一个比特币证明的 `.ots` 文件的完整内容。这个文件**应该**包含一个**单一**的比特币证明，并且不引用“pending”的证明，因为在这个上下文中它们是无用的。

### 示例 OpenTimestamps 证明验证流程

使用 [`nak`](https://github.com/fiatjaf/nak)，[`jq`](https://jqlang.github.io/jq/) 和 [`ots`](https://github.com/fiatjaf/ots)：

```bash
~> nak req -i e71c6ea722987debdb60f81f9ea4f604b5ac0664120dd64fb9d23abc4ec7c323 wss://nostr-pub.wellorder.net | jq -r .content | ots verify
> using an esplora server at https://blockstream.info/api
- sequence ending on block 810391 is valid
timestamp validated at block [810391]
```
