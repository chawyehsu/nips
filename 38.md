NIP-38
======

用户状态
--------

`草案` `可选` `作者:jb55`

## 摘要

此 NIP 为用户提供了一种分享实时状态的方式，例如他们正在听什么音乐，以及他们当前在做什么：工作，玩耍，不在办公室等。

## 实时状态

定义了一种特殊的事件，`kind:30315` “用户状态”，作为一个*可选过期的* _参数化可替换事件_，其中的 `d` 标签代表状态类型：

例如：

```js
{
  "kind": 30315,
  "content": "Sign up for nostrasia!",
  "tags": [
    ["d", "general"],
    ["r", "https://nostr.world"]
  ],
}

{
  "kind": 30315,
  "content": "Intergalatic - Beastie Boys",
  "tags": [
    ["d", "music"],
    ["r", "spotify:search:Intergalatic%20-%20Beastie%20Boys"],
    ["expiration", "1692845589"]
  ],
}
```

定义了两种常见的状态类型：`general` 和 `music`。`general` 代表一般状态：“工作中”，“徒步旅行”等。

`music` 状态事件用于实时流式传输你当前正在听的内容。`music` 状态的过期时间应该是音轨停止播放的时间。

可以使用任何其他状态类型，但这些类型不由此 NIP 定义。

状态**可以**包括一个 `r`，`p`，`e` 或 `a` 标签，链接到 URL，个人资料，注释，或参数化可替换事件。

# 客户端行为

客户端**可以**在帖子或个人资料旁边显示这个状态，以提供实时用户状态信息。

# 使用案例

* 日历 nostr 应用程序，当你在会议中时更新你的一般状态
* Nostr Nest 在你加入时更新你的一般状态，并附上指向 nest 的链接
* Nostr 音乐流媒体服务，当你在听音乐时更新你的音乐状态
* 播客应用程序，当你在听播客时更新你的音乐状态，并附上一个链接供其他人也听
* 客户端可以使用系统媒体播放器来更新正在播放的音乐状态

`content` **可以**包括表情符号，或 [NIP-30](30.md) 自定义表情符号。如果 `content` 是一个空字符串，那么客户端应该清除状态。
