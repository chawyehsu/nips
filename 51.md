NIP-51
======

列表
----

`草案` `可选` `作者:fiatjaf` `作者:arcbtc` `作者:monlovesmango` `作者:eskema` `作者:gzuuus`

“列表”事件被定义为具有一系列公开和/或私有标签。公开标签将在事件 `tags` 中列出。私有标签将在事件 `content` 中加密。私有标签的加密将使用 [NIP-04 - 加密私信](04.md) 加密，使用列表作者的私钥和公钥作为共享密码。每个创建的列表类型应使用不同的事件种类。

如果一个列表每个用户只能定义一次（如“静音”列表），该列表应被声明为 _可替换事件_。这些列表可被称为“可替换列表”。否则，列表是一个 _参数化可替换事件_，列表名称将被用作 `d` 标签。这些列表可被称为“参数化可替换列表”。

## 可替换列表事件示例

假设一个用户想要创建一个“Mute”列表，并有以下密钥：

```
priv: fb505c65d4df950f5d28c9e4d285ee12ffaf315deef1fc24e3c7cd1e7e35f2b1
pub: b1a5c93edcc8d586566fde53a20bdb50049a97b15483cb763854e57016e0fa3d
```

用户希望公开包含这些用户：

```json
["p", "3bf0c63fcb93463407af97a5e5ee64fa883d107ef9e558472c4eb9aaaefa459d"],
["p", "32e1827635450ebb3c5a7d12c1f8e7b2b514439ac10a67eef3d9fd9c5c68e245"]
```

并私下包含这些用户（以下是将被加密并放置在事件内容中的 JSON）：

```json
[
    ["p", "9ec7a778167afb1d30c4833de9322da0c08ba71a69e1911d5578d3144bb56437"],
    ["p", "8c0da4862130283ff9e67d889df264177a508974e2feb96de139804ea66d6168"]
]
```

然后，用户将创建如下所示的“Mute”列表事件：

```json
{
  "kind": 10000,
  "tags": [
    ["p", "3bf0c63fcb93463407af97a5e5ee64fa883d107ef9e558472c4eb9aaaefa459d"],
    ["p", "32e1827635450ebb3c5a7d12c1f8e7b2b514439ac10a67eef3d9fd9c5c68e245"],
  ],
  "content": "VezuSvWak++ASjFMRqBPWS3mK5pZ0vRLL325iuIL4S+r8n9z+DuMau5vMElz1tGC/UqCDmbzE2kwplafaFo/FnIZMdEj4pdxgptyBV1ifZpH3TEF6OMjEtqbYRRqnxgIXsuOSXaerWgpi0pm+raHQPseoELQI/SZ1cvtFqEUCXdXpa5AYaSd+quEuthAEw7V1jP+5TDRCEC8jiLosBVhCtaPpLcrm8HydMYJ2XB6Ixs=?iv=/rtV49RFm0XyFEwG62Eo9A==",
  ...其它字段
}
```

## 参数化可替换列表事件示例

假设一个用户想要创建一个“分类人物”列表，包含 `nostr` 人物，并且拥有以下密钥：

```
priv: fb505c65d4df950f5d28c9e4d285ee12ffaf315deef1fc24e3c7cd1e7e35f2b1
pub: b1a5c93edcc8d586566fde53a20bdb50049a97b15483cb763854e57016e0fa3d
```

用户希望公开包含这些用户：

```json
["p", "3bf0c63fcb93463407af97a5e5ee64fa883d107ef9e558472c4eb9aaaefa459d"],
["p", "32e1827635450ebb3c5a7d12c1f8e7b2b514439ac10a67eef3d9fd9c5c68e245"]
```

并私下包含这些用户（以下是将被加密并放置在事件内容中的 JSON）：

```json
[
    ["p", "9ec7a778167afb1d30c4833de9322da0c08ba71a69e1911d5578d3144bb56437"],
    ["p", "8c0da4862130283ff9e67d889df264177a508974e2feb96de139804ea66d6168"]
]
```

然后，用户将创建如下所示的“分类人物”列表事件：

```json
{
  "kind": 30000,
  "tags": [
    ["d", "nostr"],
    ["p", "3bf0c63fcb93463407af97a5e5ee64fa883d107ef9e558472c4eb9aaaefa459d"],
    ["p", "32e1827635450ebb3c5a7d12c1f8e7b2b514439ac10a67eef3d9fd9c5c68e245"],
  ],
  "content": "VezuSvWak++ASjFMRqBPWS3mK5pZ0vRLL325iuIL4S+r8n9z+DuMau5vMElz1tGC/UqCDmbzE2kwplafaFo/FnIZMdEj4pdxgptyBV1ifZpH3TEF6OMjEtqbYRRqnxgIXsuOSXaerWgpi0pm+raHQPseoELQI/SZ1cvtFqEUCXdXpa5AYaSd+quEuthAEw7V1jP+5TDRCEC8jiLosBVhCtaPpLcrm8HydMYJ2XB6Ixs=?iv=/rtV49RFm0XyFEwG62Eo9A==",
  ...其它字段
}
```

假设一个用户想要创建一个包含 `bookmarks` 的“分类书签”列表，并且拥有以下密钥：

```
priv: fb505c65d4df950f5d28c9e4d285ee12ffaf315deef1fc24e3c7cd1e7e35f2b1
pub: b1a5c93edcc8d586566fde53a20bdb50049a97b15483cb763854e57016e0fa3d
```

用户希望公开包含这些书签：

```json
["e", "5c83da77af1dec6d7289834998ad7aafbd9e2191396d75ec3cc27f5a77226f36", "wss://nostr.example.com"],
["a", "30023:f7234bd4c1394dda46d09f35bd384dd30cc552ad5541990f98844fb06676e9ca:abcd", "wss://nostr.example.com"],
["r", "https://github.com/nostr-protocol/nostr", "Nostr repository"],
```

并私下包含这些书签（以下是将被加密并放置在事件内容中的 JSON）：

```json
[
    ["r", "https://my-private.bookmark", "My private bookmark"],
    ["a", "30001:f7234bd4c1394dda46d09f35bd384dd30cc552ad5541990f98844fb06676e9ca:abcd", "wss://nostr.example.com"],
]
```

然后，用户将创建如下所示的“分类书签”列表事件：

```json
{
  "kind": 30001,
  "tags": [
    ["d", "bookmarks"],
    ["e", "5c83da77af1dec6d7289834998ad7aafbd9e2191396d75ec3cc27f5a77226f36", "wss://nostr.example.com"],
    ["a", "30023:f7234bd4c1394dda46d09f35bd384dd30cc552ad5541990f98844fb06676e9ca:abcd", "wss://nostr.example.com"],
    ["r", "https://github.com/nostr-protocol/nostr", "Nostr repository"],
  ],
  "content": "y3AyaLJfnmYr9x9Od9o4aYrmL9+Ynmsim5y2ONrU0urOTq+V81CyAthQ2mUOWE9xwGgrizhY7ILdQwWhy6FK0sA33GHtC0egUJw1zIdknPe7BZjznD570yk/8RXYgGyDKdexME+RMYykrnYFxq1+y/h00kmJg4u+Gpn+ZjmVhNYxl9b+TiBOAXG9UxnK/H0AmUqDpcldn6+j1/AiStwYZhD1UZ3jzDIk2qcCDy7MlGnYhSP+kNmG+2b0T/D1L0Z7?iv=PGJJfPE84gacAh7T0e6duQ==",
  ...其它字段
}
```

## 列表事件类型

| 类型  | 列表类型 |
| ----- | -------- |
| 10000 | 静音     |
| 10001 | 置顶     |
| 30000 | 分类人物 |
| 30001 | 分类书签 |

### 静音列表

定义为 `10000` 类型的事件是一个可替换列表事件，用于列出用户想要静音的内容。任何标准化标签都可以包含在静音列表中。

### 置顶列表

定义为 `10001` 类型的事件是一个可替换列表事件，用于列出用户想要置顶的内容。任何标准化标签都可以包含在置顶列表中。

### 分类人物列表

定义为 `30000` 类型的事件是一个参数化可替换列表事件，用于分类人物。此事件的“d”参数保存列表的类别名称。这些列表中包含的标签必须遵循 [NIP-02 - 联系人列表和昵称](02.md) 中定义的类型 3 事件的格式。

### 分类书签列表

定义为 `30001` 类型的事件是一个参数化可替换列表事件，用于分类书签。此事件的“d”参数保存列表的类别名称。书签列表可能包含如“title”，“image”，“summary” 等元数据标签，如 [NIP-23 - 长格式内容](23.md) 中所定义。任何标准化标签都可以包含在分类书签列表中。
