NIP-02
======

联系人列表与昵称
----------------

`终稿` `可选` `作者:fiatjaf` `作者:arcbtc`

定义了一种特殊事件，类型为 `3`，意为“联系人列表”，它包含了一系列的 `p` 标签，每个标签代表一个被关注/已知的个人资料。

每个标签条目应包含个人资料的公钥，一个可以找到该公钥的事件的中继 URL（如果不需要可以设为空字符串），以及该个人资料的本地名称或“昵称”（也可以设为空字符串或不提供），即 `["p", <32 字节十六进制公钥>, <主中继 URL>, <昵称>]`。`content` 可以是任何内容，应被忽略。

例如：

```json
{
  "kind": 3,
  "tags": [
    ["p", "91cf9..4e5ca", "wss://alicerelay.com/", "alice"],
    ["p", "14aeb..8dad4", "wss://bobrelay.com/nostr", "bob"],
    ["p", "612ae..e610f", "ws://carolrelay.com/ws", "carol"]
  ],
  "content": "",
  ...其它字段
}
```

每发布一份新的联系人列表，都会覆盖过去的列表，因此它应包含所有条目。在接收到新的联系人列表后，中继和客户端**应该**立即删除过去的联系人列表。

## 用途

### 联系人列表备份

如果有人相信中继会将他们的事件存储足够长的时间，他们可以使用这种类型 3 的事件来备份他们的关注列表，并在不同的设备上恢复。

### 个人资料发现和上下文增强

客户端可以依赖类型 3 的事件来显示一个人正在浏览的个人资料所关注的人的列表；根据一个人可能正在关注或浏览的其他人的联系人列表，制作建议关注列表；或者在其他上下文中显示数据。

### 中继共享

客户端可以发布一份完整的联系人列表，其中每个联系人带有定义好的中继，这样其他客户端可以在需要时使用这些来更新他们的内部中继列表，增加对抗审查的能力。

### 昵称方案

客户端可以使用这些联系人列表的数据来构建从其他人的联系人列表派生的本地[“昵称”](http://www.skyhunter.com/marcs/petnames/IntroPetNames.html)表。这消除了全球人类可读名称的需要。例如：

某用户有一个内部联系人列表，里面写着

```json
[
  ["p", "21df6d143fb96c2ec9d63726bf9edc71", "", "erin"]
]
```

同时接收到了两个联系人列表，一个来自 `21df6d143fb96c2ec9d63726bf9edc71`，里面有

```json
[
  ["p", "a8bb3d884d5d90b413d9891fe4c4e46d", "", "david"]
]
```

另一个来自 `a8bb3d884d5d90b413d9891fe4c4e46d`，里面是

```json
[
  ["p", "f57f54057d2a7af0efecc8b0b66f5708", "", "frank"]
]
```

当用户看到 `21df6d143fb96c2ec9d63726bf9edc71` 时，客户端可以显示 _erin_；
当用户看到 `a8bb3d884d5d90b413d9891fe4c4e46d` 时，客户端可以显示 _david.erin_；
当用户看到 `f57f54057d2a7af0efecc8b0b66f5708` 时，客户端可以显示 _frank.david.erin_。
