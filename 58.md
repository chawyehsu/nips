NIP-58
======

徽章
----

`草案` `可选` `作者:cameri`

三个特殊事件用于在用户资料中定义、授予和显示徽章：

1. “徽章定义”事件被定义为一种参数化的可替换事件，类型为 `30009`，具有一个 `d` 标签，其值唯一地标识徽章（例如 `bravery`），由徽章发行者发布。徽章定义可被更新。

2. “徽章授予”事件是一种类型为 `8` 的事件，带有一个单独的 `a` 标签，引用一个“徽章定义”事件，以及一个或多个 `p` 标签，对应徽章发行者希望授予的每个公钥。授予的徽章是不可变不可转让的。

3. “个人资料徽章”事件被定义为一种参数化的可替换事件，类型为 `30008`，带有一个 `d` 标签，其值为 `profile_badges`。个人资料徽章包含一个有序的对 `a` 和 `e` 标签的列表，每个徽章都引用一个“徽章定义”和一个“徽章授予”。

### 徽章定义事件

以下标签**必须**存在：

- `d` 标签，带有徽章的唯一名称。

以下标签**可以**存在：

- 一个 `name` 标签，带有徽章的简短名称。
- `image` 标签，其值是代表徽章的高分辨率图像的 URL。第 2 个值可选地指定图像的尺寸为 `width`x`height` 像素。徽章推荐的尺寸是 1024x1024 像素。
- 一个 `description` 标签，其值**可以**包含图像的文本表示、徽章背后的含义，或者发行的原因。
- 一个或多个 `thumb` 标签，其第 1 个值是指向在 `image` 标签中引用的图像的缩略图版本的 URL。第 2 个值可选地指定缩略图的尺寸为 `width`x`height` 像素。

### 徽章授予事件

以下标签**必须**存在：

- 一个 `a` 标签，引用类型为 `30009` 的徽章定义事件。
- 一个或多个 `p` 标签，每个标签引用一个被授予的公钥。

### 个人资料徽章事件

一个公钥可以被授予的徽章数量是无限的。个人资料徽章事件允许个人用户接受或拒绝被授予的徽章，以及选择他们在个人资料上的徽章显示顺序。

以下标签**必须**存在：

- 一个 `d` 标签，带有唯一标识符 `profile_badges`

以下标签**可以**存在：

- 0 个或多个有序的连续的 `a` 和 `e` 标签对，分别引用类型为 `30009` 的徽章定义和类型为 `8` 的徽章授予。客户端**应该**忽略没有对应 `e` 标签的 `a` 标签，反之亦然。`e` 标签引用的徽章授予应包含相同的 `a` 标签。

### 动机

用户**可以**被授予徽章以（不限于）表彰，感谢，参与，或者对某个目标，任务或事业的赞赏。

用户**可以**选择用他们认为有声望的徽章发行者的徽章来装饰他们的个人资料，以获得名誉，知名度，认可，支持等。

### 建议

徽章发行者**可以**在铸造徽章定义或徽章奖励时包含一些 [NIP-13](13.md) 中的工作证明，以将它们与能量支出相结合，可以说让徽章对希望收集它们的用户更加特别和有价值。

客户端**可以**将徽章发行者（公钥）列入白名单，以确保他们对用户保持有价值/特殊的因素。

徽章图像推荐的宽高比是 1:1，高分辨率尺寸为 1024x1024 像素。

徽章缩略图推荐的尺寸是：512x512（xl），256x256（l），64x64（m），32x32（s）和 16x16（xs）。

客户端**可以**选择渲染比用户个人资料徽章事件中指定徽章量少的徽章，或者用适合客户端主题的图像和缩略图替换徽章图像和缩略图。

客户端**应该**尝试根据用户选择的徽章数量和可用空间，渲染最合适的徽章缩略图。客户端**应该**在用户操作（点击，轻触，悬停）时尝试渲染高分辨率版本。

### 徽章定义事件的示例

```json
{
  "pubkey": "alice",
  "kind": 30009,
  "tags": [
    ["d", "bravery"],
    ["name", "Medal of Bravery"],
    ["description", "Awarded to users demonstrating bravery"],
    ["image", "https://nostr.academy/awards/bravery.png", "1024x1024"],
    ["thumb", "https://nostr.academy/awards/bravery_256x256.png", "256x256"],
  ],
  ...
}
```

### 徽章授予事件的示例

```json
{
  "id": "<badge award event id>",
  "kind": 8,
  "pubkey": "alice",
  "tags": [
    ["a", "30009:alice:bravery"],
    ["p", "bob", "wss://relay"],
    ["p", "charlie", "wss://relay"],
  ],
  ...
}
```

### 个人资料徽章事件的示例

荣誉的勇敢的 Bob：

```json
{
  "kind": 30008,
  "pubkey": "bob",
  "tags": [
    ["d", "profile_badges"],
    ["a", "30009:alice:bravery"],
    ["e", "<bravery badge award event id>", "wss://nostr.academy"],
    ["a", "30009:alice:honor"],
    ["e", "<honor badge award event id>", "wss://nostr.academy"],
  ],
  ...
}
```
