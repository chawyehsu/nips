NIP-25
======

反应
----

`草案` `可选` `作者:jb55`

反应是一个 `kind 7` 事件，用于对其他事件做出反应。

通用反应，由设置为 `+` 字符串的 `content` 表示，**应该**被解释为“喜欢”或“赞”。

设置 `content` 为 `-` 的反应**应该**被解释为“不喜欢”或“踩”。它**不该**被计为“喜欢”，并且**可以**在帖子上显示为踩或不喜欢。客户端也**可以**选择在类似 reddit 的赞和踩的系统中对喜欢和不喜欢进行对比，或者将它们显示为单独的计数。

`content` **可以**是 emoji，或者 [NIP-30](30.md) 的自定义 emoji，在这种情况下，它**可以**被解释为“喜欢”或“不喜欢”，或者客户端**可以**在帖子上显示这个 emoji 反应。如果 `content` 是一个空字符串，那么客户端应该将其视为“+”。

标签
----

反应事件**应该**包括用户正在对其做出反应的贴文的 `e` 和 `p` 标签。这允许用户被通知到他们被提到的帖文的反应。包括 `e` 标签使客户端能够拉取与单个贴文或线程中的所有贴文相关的所有反应。

最后一个 `e` 标签**必须**是正在被反应的贴文的 `id`。

最后一个 `p` 标签**必须**是被反应的事件的 `pubkey`。

反应事件**可以**包括一个 `k` 标签，其值为被反应事件的类型数字的字符串化。

示例代码

```swift
func make_like_event(pubkey: String, privkey: String, liked: NostrEvent) -> NostrEvent {
    var tags: [[String]] = liked.tags.filter { 
    	tag in tag.count >= 2 && (tag[0] == "e" || tag[0] == "p") 
    }
    tags.append(["e", liked.id])
    tags.append(["p", liked.pubkey])
    tags.append(["k", liked.kind])
    let ev = NostrEvent(content: "+", pubkey: pubkey, kind: 7, tags: tags)
    ev.calculate_id()
    ev.sign(privkey: privkey)
    return ev
}
```

自定义表情反应
--------------

客户端可以在反应内容中指定一个自定义表情（[NIP-30](30.md)）`:shortcode:`。如果指定了简码，客户端应参考表情标签并将内容渲染为表情。

```json
{
  "kind": 7,
  "content": ":soapbox:",
  "tags": [
    ["emoji", "soapbox", "https://gleasonator.com/emoji/Gleasonator/soapbox.png"]
  ],
  "pubkey": "79c2cae114ea28a981e7559b4fe7854a473521a8d22a66bbab9fa248eb820ff6",
  "created_at": 1682790000
}
```

内容只能设置一个 `:shortcode:`。并且表情标签应该只有一个。
