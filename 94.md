NIP-94
======

文件元数据
----------

`草案` `可选` `作者:frbitten` `作者:kieran` `作者:lovvtide` `作者:fiatjaf` `作者:staab`

本 NIP 的目的是允许对共享文件进行组织和分类。这样中继可以以任何感兴趣的方式进行过滤和组织。这样可以创建出多种类型的文件共享型客户端。不期望处理 kind:1 贴文或 kind:30023 长格式文章的“社交型”客户端实现 NIP-94 支持。

## 事件格式

本 NIP 规定使用 `1063` 事件类型，在 `content` 中描述文件内容，并列出以下标签：

* `url` 下载文件的 url
* `m` 表示文件数据类型的字符串。必须使用 [MIME 类型](https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types)格式，且应为小写。
* `"aes-256-gcm"`（可选）AES-GCM 加密的密钥和 nonce，tagSize 始终为 128 位
* `x` 包含文件的 SHA-256 十六进制编码字符串。
* `size`（可选）文件大小（以字节为单位）
* `dim`（可选）文件大小（以像素为单位），格式为 `<宽度>x<高度>`
* `magnet`（可选）磁力文件的 URI
* `i`（可选）种子信息哈希
* `blurhash`（可选）客户端加载文件时显示的 [blurhash](https://github.com/woltapp/blurhash)
* `thumb`（可选）具有相同纵横比的缩略图 url
* `image`（可选）具有相同尺寸的预览图像 url
* `summary`（可选）文本摘要
* `alt`（可选）用于辅助功能的描述

```json
{
  "id": <序列化事件数据的 sha256 的 32 字节小写十六进制编码>,
  "pubkey": <事件创建者的公钥的 32 字节小写十六进制编码>,
  "created_at": <unix 时间戳，以秒为单位>,
  "kind": 1063,
  "tags": [
    ["url",<文件的 URI 字符串>],
    ["aes-256-gcm",<密钥>, <iv>],
    ["m", <MIME 类型>],
    ["x",<SHA-256 哈希>],
    ["size", <文件大小，以字节为单位>],
    ["dim", <文件大小，以像素为单位>],
    ["magnet",<磁力 URI> ],
    ["i",<种子信息哈希>],
    ["blurhash", <值>],
    ["thumb", <缩略图 URI 字符串>],
    ["image", <预览 URI 字符串>],
    ["summary", <摘录>],
    ["alt", <描述>]
  ],
  "content": <说明文字>,
  "sig": <64 字节长的对序列化事件数据 sha256 哈希，即 "id" 字段，的签名，小写十六进制编码>
}
```

## 使用案例建议

* 用于索引共享文件的中继。例如，推广种子。
* 类似 Pinterest 的客户端，人们可以分享他们的作品集并启发他人。
* 一种简单的分发配置和软件更新的方式。
