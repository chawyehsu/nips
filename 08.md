> __警告__  `不推荐使用`：已被 [NIP-27](27.md) 取代

NIP-08
======

处理提及
--------

`终稿` `不推荐使用` `可选` `作者:fiatjaf` `作者:scsibug`

本文档规范了客户端对 `text_note` 内容中内联提及其他事件和公钥的处理方式。

希望允许标记提及的客户端**必须**在用户开始输入特殊键（例如“@”）或按下某个按钮以包含提及等时，显示一个自动完成组件或类似的东西 -- 或者这些客户端可以想出其他方式来明确区分提及和普通文本。

一旦识别出一个提及，例如，公钥 `27866e9d854c78ae625b867eefdfa9580434bc3e675be08d2acb526610d96fbe`，客户端**必须**将该公钥添加到 `.tags` 中，标签为 `p`，然后将其文本引用（在 `.content` 内）替换为 `#[index]` 的表示法，其中“index”等于相关标签在标签数组中的索引。

同样的过程适用于提及事件 ID。

接收到带有这样的 `#[index]` 提及在其 `.content` 中的 `text_note` 事件的客户端**可以**使用 `.tags` 数组中的实际内容进行搜索和替换，替换为实际提及的公钥或事件 ID，同时进行任何所需的上下文增强（例如，链接到公钥或显示提及的事件内容预览）。

在 `#[index]` 中，如果 `index` 超出了标签数组的范围，或者指向的不是 `e` 或 `p` 标签，或者是其他声明支持此表示法的标签，客户端**不能**进行此类替换或增强，而应将其显示为普通文本。
